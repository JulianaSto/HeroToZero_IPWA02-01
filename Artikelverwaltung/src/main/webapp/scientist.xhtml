<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
	<link rel="stylesheet" type="text/css" media="screen" href="style.css" />
	<title>Artikelverwaltung</title>
	<h:outputText value="#{loginController.checkLogin()}" />
</h:head>
<h:body>

	<p>
		<img id="kopf_links" src="logo.jpg" width="250" alt="Logo" />
	</p>
	<p id="kopf_rechts">
		<h:outputText value="#{anschrift.name}" />
		<br />
		<h:outputText value="#{anschrift.strasse} #{anschrift.hausnummer}" />
		<br />
		<h:outputText value="#{anschrift.plz} #{anschrift.ort}" />
	</p>
	<h1>Scientist-Seite</h1>
	<h:messages globalOnly="true" layout="table"
		style="color: green; font-weight: bold;" />

	<!-- Tabelle zum EinfÃ¼gen neuer Werte-->
	<h:form>
		<h:panelGrid columns="2">
			<h:outputLabel for="name" value="Set Country to change/add data:" />
			<h:inputText id="name"
				value="#{publisherController.countryToBeChanged}" />
			<h:commandButton value="Load Country"
				action="#{publisherController.loadCountry}"
				update=":form:emissionTable :form:messages" />
		</h:panelGrid>
		<br />
		<!-- START Show Emission for this country Output-Test-->

		<h:dataTable id="emissionTable"
			value="#{publisherController.aktuelleCountry}" var="countryTest">
			<h:column>
				<f:facet name="header">Country</f:facet>
				<h:outputText value="#{countryTest.name}" />
			</h:column>
			<h:column>
				<f:facet name="header">Year</f:facet>
				<h:dataTable value="#{countryTest.co2Emissionen}" var="emi">
					<h:column>
						<h:outputText value="#{emi.year}" />
					</h:column>
				</h:dataTable>
			</h:column>
			<h:column>
				<f:facet name="header">CO2 Emissions</f:facet>
				<h:dataTable value="#{countryTest.co2Emissionen}" var="emi">
					<h:column>
						<h:outputText value="#{emi.emission}" />
					</h:column>
				</h:dataTable>

			</h:column>
		</h:dataTable>

		<!-- ENDE Show Emission for this country Output-Test-->

		<!-- START Benutzereingabe neue Emission -->
		<h3>Add new data set:</h3>
		<h:panelGrid id="inputTable" columns="2">
			<h:outputLabel for="year" value="Year:" />
			<h:inputText id="year" value="#{publisherController.newEmissionYear}"
				required="true">
				<f:validator validatorId="notEmptyValidator" />
			</h:inputText>

			<h:message for="year" styleClass="error" />
			<br />

			<h:outputLabel for="emission" value="CO2 Emission:" />
			<h:inputText id="emission"
				value="#{publisherController.newEmissionValue}" required="true">
				<f:validator validatorId="notEmptyValidator" />
			</h:inputText>
			<h:message for="emission" styleClass="error" />
			<br />

			<h:commandButton value="Add Emission"
				action="#{publisherController.addEmission}"
				update=":form:emissionTable :form:emissionTable2 :form:messages" />

		</h:panelGrid>

		<!-- ENDE Benutzereingabe neue Emission -->


		<!-- START Emission bearbeiten -->
		<h3>Change existent data set:</h3>
		<h:dataTable id="emissionTable2"
			value="#{publisherController.aktuelleCountry}" var="countryTest">
			<h:column>
				<f:facet name="header">Country</f:facet>
				<h:outputText value="#{countryTest.name}" />
			</h:column>
			<h:column>
				<f:facet name="header">Year</f:facet>
				<h:dataTable value="#{countryTest.co2Emissionen}" var="emi">
					<h:column>
						<h:inputText value="#{emi.year}" />
					</h:column>
				</h:dataTable>
			</h:column>
			<h:column>
				<f:facet name="header">CO2 Emissions</f:facet>
				<h:dataTable value="#{countryTest.co2Emissionen}" var="emi">
					<h:column>
						<h:inputText value="#{emi.emission}" />
						<h:commandButton value="Save Changes"
							actionListener="#{publisherController.changeEmission(emi)}"
							update=":form:emissionTable :form:messages">
						</h:commandButton>
					</h:column>
				</h:dataTable>

			</h:column>

		</h:dataTable>

	</h:form>



</h:body>
</html>

